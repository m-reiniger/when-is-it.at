<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" href="/favicon.ico" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- Primary Meta Tags -->
        <title>When is it at? - Global Event Time Converter</title>
        <meta name="title" content="When is it at? - Global Event Time Converter" />
        <meta
            name="description"
            content="Convert global events to your local timezone instantly. Create and share events with precise timezone information. Perfect for international events, meetings, and celebrations." />
        <meta
            name="keywords"
            content="timezone converter, event time, global time, local time, time conversion, event sharing, international events, time zone calculator, countdown timer" />
        <meta name="author" content="Codewald" />
        <meta name="robots" content="index, follow" />
        <link rel="canonical" href="https://when-is-it.at/" />

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://when-is-it.at/" />
        <meta property="og:title" content="When is it at? - Global Event Time Converter" />
        <meta
            property="og:description"
            content="Convert global events to your local timezone instantly. Create and share events with precise timezone information." />
        <meta property="og:image" content="https://when-is-it.at/og-image.svg" />
        <meta property="og:site_name" content="When is it at?" />
        <meta property="og:locale" content="en_US" />

        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image" />
        <meta property="twitter:url" content="https://when-is-it.at/" />
        <meta property="twitter:title" content="When is it at? - Global Event Time Converter" />
        <meta
            property="twitter:description"
            content="Convert global events to your local timezone instantly. Create and share events with precise timezone information." />
        <meta property="twitter:image" content="https://when-is-it.at/og-image.svg" />

        <!-- Additional SEO Meta Tags -->
        <meta name="theme-color" content="#ffd700" />
        <meta name="msapplication-TileColor" content="#ffd700" />
        <meta name="mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="default" />
        <meta name="apple-mobile-web-app-title" content="When is it at?" />

        <!-- Additional Social Media Meta Tags -->
        <meta name="format-detection" content="telephone=no" />
        <meta name="application-name" content="When is it at?" />

        <!-- Preconnect to external domains for performance -->
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <!-- Structured Data for Organization -->
        <script type="application/ld+json">
            {
                "@context": "https://schema.org",
                "@type": "WebApplication",
                "name": "When is it at?",
                "description": "Convert global events to your local timezone instantly. Create and share events with precise timezone information.",
                "url": "https://when-is-it.at",
                "applicationCategory": "UtilityApplication",
                "operatingSystem": "Web Browser",
                "offers": {
                    "@type": "Offer",
                    "price": "0",
                    "priceCurrency": "USD"
                },
                "creator": {
                    "@type": "Organization",
                    "name": "Codewald"
                },
                "featureList": [
                    "Timezone conversion",
                    "Event creation and sharing",
                    "Global to local time conversion",
                    "Real-time countdown timers"
                ]
            }
        </script>

        <!-- Google tag (gtag.js) - Loaded conditionally based on consent -->
        <script>
            // Initialize Google Analytics only after consent is given
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag('consent', 'default', {
                ad_storage: 'denied',
                ad_user_data: 'denied',
                ad_personalization: 'denied',
                analytics_storage: 'denied',
            });
            gtag('js', new Date());
            gtag('config', 'G-4FS4E4P534');

            // Function to initialize Google Analytics
            window.initializeGoogleAnalytics = function () {
                // Load the gtag script
                const script = document.createElement('script');
                script.async = true;
                script.src = 'https://www.googletagmanager.com/gtag/js?id=G-4FS4E4P534';
                document.head.appendChild(script);

                // Configure Google Analytics
                gtag('consent', 'update', {
                    analytics_storage: 'granted',
                });
            };

            // Function to initialize Google Ads (if needed in the future)
            window.initializeGoogleAds = function () {
                // This can be used for Google Ads conversion tracking
                // For now, we'll just enable ad personalization signals if consent is given
                gtag('consent', 'update', {
                    ad_user_data: 'granted',
                    ad_personalization: 'granted',
                    ad_storage: 'granted',
                });
            };

            // Check for existing consent and initialize if already given
            document.addEventListener('DOMContentLoaded', function () {
                try {
                    const consent = localStorage.getItem('when-is-it-consent');
                    if (consent) {
                        const parsedConsent = JSON.parse(consent);
                        if (parsedConsent.analytics) {
                            window.initializeGoogleAnalytics();
                        }
                        if (parsedConsent.ads) {
                            window.initializeGoogleAds();
                        }
                    }
                } catch (error) {
                    console.warn('Failed to check existing consent:', error);
                }
            });
        </script>
    </head>
    <body>
        <div id="app"></div>
        <script type="module" src="/src/main.ts"></script>
    </body>
</html>
